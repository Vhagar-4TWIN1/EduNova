import{r as s,a as b,j as i,b as r,a3 as d,a6 as M,a7 as U,a8 as j,ad as O,a5 as B}from"./index-B07QrE09.js";import{C as F,S as E}from"./Snackbar-BXwARhA4.js";import{A as W}from"./Alert-DACpG7Jo.js";import{C as A}from"./Card-D2GAe7H9.js";import{C as N}from"./CardContent-DA501-tu.js";import{S as f}from"./Stack-CzBGNAzc.js";import{M as H}from"./MenuItem-DDUDt6RG.js";import{B as g}from"./Button-C2CxUlaZ.js";import"./useThemeProps-Dr1Q7xUJ.js";import"./getThemeProps-C5bpZ834.js";import"./ClickAwayListener-D9JjP1FS.js";import"./Close-C0eU_P1Q.js";import"./listItemTextClasses-N2EmFEEp.js";const re=()=>{const[h,u]=s.useState([]),[C,x]=s.useState({name:"",description:""}),[n,p]=s.useState(null),[y,L]=s.useState(!0),[k,c]=s.useState(null),[S,m]=s.useState(null),_=["beginner","intermediate","advanced"];s.useEffect(()=>{q()},[]);const q=async()=>{var e,a;try{L(!0);const t=await b.get("https://edunova-back-rqxc.onrender.com/api/level");u(t.data.data),c(null)}catch(t){c(((a=(e=t.response)==null?void 0:e.data)==null?void 0:a.error)||"Error fetching levels")}finally{L(!1)}},D=async()=>{var e,a;try{const t=await b.post("https://edunova-back-rqxc.onrender.com/api/level",C);u([...h,t.data.data]),x({name:"",description:""}),m("Level created successfully")}catch(t){c(((a=(e=t.response)==null?void 0:e.data)==null?void 0:a.error)||"Error creating level")}},z=async()=>{var e,a;try{const t=await b.put(`https://edunova-back-rqxc.onrender.com/api/level/${n._id}`,n);u(h.map(o=>o._id===n._id?t.data.data:o)),p(null),m("Level updated successfully")}catch(t){c(((a=(e=t.response)==null?void 0:e.data)==null?void 0:a.error)||"Error updating level")}},I=async e=>{var a,t;try{await b.delete(`https://edunova-back-rqxc.onrender.com/api/level/${e}`),u(h.filter(o=>o._id!==e)),m("Level deleted successfully")}catch(o){c(((t=(a=o.response)==null?void 0:a.data)==null?void 0:t.error)||"Error deleting level")}},w=e=>{const{name:a,value:t}=e.target;n?p(o=>({...o,[a]:t})):x(o=>({...o,[a]:t}))},v=()=>{c(null),m(null)},l="#198754";return i(F,{maxWidth:"md",sx:{mt:4},children:[r(d,{variant:"h4",sx:{mb:3,textAlign:"center",fontWeight:"bold",color:l},children:"Level Management"}),r(E,{open:!!k,autoHideDuration:6e3,onClose:v,anchorOrigin:{vertical:"top",horizontal:"center"},children:r(W,{severity:"error",onClose:v,children:k})}),r(E,{open:!!S,autoHideDuration:6e3,onClose:v,anchorOrigin:{vertical:"top",horizontal:"center"},children:r(W,{severity:"success",onClose:v,children:S})}),r(A,{sx:{mb:3,p:2,borderColor:l,borderWidth:1,borderStyle:"solid"},children:i(N,{children:[r(d,{variant:"h6",sx:{mb:2,fontWeight:"bold",color:l},children:n?"Edit Level":"Add New Level"}),i(f,{spacing:2,children:[i(M,{fullWidth:!0,size:"small",children:[r(U,{id:"level-name-label",children:"Name *"}),r(j,{labelId:"level-name-label",label:"Name *",name:"name",value:n?n.name:C.name,onChange:w,required:!0,children:_.map(e=>r(H,{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),r(O,{label:"Description",name:"description",value:n?n.description:C.description,onChange:w,fullWidth:!0,multiline:!0,rows:3,size:"small"}),i(f,{direction:"row",spacing:2,children:[r(g,{variant:"contained",sx:{backgroundColor:l,"&:hover":{backgroundColor:"#157347"}},onClick:n?z:D,disabled:y,children:n?"Update":"Add"}),n&&r(g,{variant:"outlined",onClick:()=>p(null),children:"Cancel"})]})]})]})}),r(d,{variant:"h6",sx:{mt:3,mb:2,fontWeight:"bold",color:l},children:"Levels List"}),y?r(B,{}):h.length===0?r(d,{variant:"body2",children:"No levels available."}):h.map(e=>r(A,{sx:{mb:2,p:2,backgroundColor:"#f9f9f9"},children:i(N,{children:[r(d,{variant:"subtitle1",fontWeight:"bold",color:l,children:e.name.charAt(0).toUpperCase()+e.name.slice(1)}),r(d,{variant:"body2",color:"text.secondary",children:e.description||"No description"}),i(f,{direction:"row",spacing:2,sx:{mt:2},children:[r(g,{variant:"outlined",sx:{color:l,borderColor:l},onClick:()=>p(e),children:"Edit"}),r(g,{variant:"outlined",sx:{color:"#dc3545",borderColor:"#dc3545"},onClick:()=>I(e._id),children:"Delete"})]})]})},e._id))]})};export{re as default};
