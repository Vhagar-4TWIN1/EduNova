import{b as s}from"./vendor-gGFwV6Yc.js";import{a as b,j as i,b as r,$ as d,a2 as M,a3 as U,a4 as j,a9 as O,a1 as $}from"./index-CNYIw3Ap.js";import{C as B,S as E}from"./Snackbar-DdkyTXPx.js";import{A as W}from"./Alert-BWUQE-b0.js";import{C as A}from"./Card-BV5SPX1h.js";import{C as N}from"./CardContent-B6nDGSXF.js";import{S as f}from"./Stack-BLMnx7VC.js";import{M as F}from"./MenuItem-Cq1GJlgR.js";import{B as g}from"./Button-q5rqdzgK.js";import"./useThemeProps-C1R061y2.js";import"./getThemeProps-DCO5hL5C.js";import"./ClickAwayListener-Fhc0bISo.js";import"./Close-B0rgw4hC.js";import"./listItemTextClasses-DelaPf-g.js";const te=()=>{const[h,p]=s.useState([]),[C,x]=s.useState({name:"",description:""}),[n,u]=s.useState(null),[y,L]=s.useState(!0),[k,c]=s.useState(null),[S,m]=s.useState(null),_=["beginner","intermediate","advanced"];s.useEffect(()=>{q()},[]);const q=async()=>{var e,a;try{L(!0);const t=await b.get("https://edunova-back-rqxc.onrender.com/api/level");p(t.data.data),c(null)}catch(t){c(((a=(e=t.response)==null?void 0:e.data)==null?void 0:a.error)||"Error fetching levels")}finally{L(!1)}},D=async()=>{var e,a;try{const t=await b.post("https://edunova-back-rqxc.onrender.com/api/level",C);p([...h,t.data.data]),x({name:"",description:""}),m("Level created successfully")}catch(t){c(((a=(e=t.response)==null?void 0:e.data)==null?void 0:a.error)||"Error creating level")}},z=async()=>{var e,a;try{const t=await b.put(`https://edunova-back-rqxc.onrender.com/api/level/${n._id}`,n);p(h.map(o=>o._id===n._id?t.data.data:o)),u(null),m("Level updated successfully")}catch(t){c(((a=(e=t.response)==null?void 0:e.data)==null?void 0:a.error)||"Error updating level")}},I=async e=>{var a,t;try{await b.delete(`https://edunova-back-rqxc.onrender.com/api/level/${e}`),p(h.filter(o=>o._id!==e)),m("Level deleted successfully")}catch(o){c(((t=(a=o.response)==null?void 0:a.data)==null?void 0:t.error)||"Error deleting level")}},w=e=>{const{name:a,value:t}=e.target;n?u(o=>({...o,[a]:t})):x(o=>({...o,[a]:t}))},v=()=>{c(null),m(null)},l="#198754";return i(B,{maxWidth:"md",sx:{mt:4},children:[r(d,{variant:"h4",sx:{mb:3,textAlign:"center",fontWeight:"bold",color:l},children:"Level Management"}),r(E,{open:!!k,autoHideDuration:6e3,onClose:v,anchorOrigin:{vertical:"top",horizontal:"center"},children:r(W,{severity:"error",onClose:v,children:k})}),r(E,{open:!!S,autoHideDuration:6e3,onClose:v,anchorOrigin:{vertical:"top",horizontal:"center"},children:r(W,{severity:"success",onClose:v,children:S})}),r(A,{sx:{mb:3,p:2,borderColor:l,borderWidth:1,borderStyle:"solid"},children:i(N,{children:[r(d,{variant:"h6",sx:{mb:2,fontWeight:"bold",color:l},children:n?"Edit Level":"Add New Level"}),i(f,{spacing:2,children:[i(M,{fullWidth:!0,size:"small",children:[r(U,{id:"level-name-label",children:"Name *"}),r(j,{labelId:"level-name-label",label:"Name *",name:"name",value:n?n.name:C.name,onChange:w,required:!0,children:_.map(e=>r(F,{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),r(O,{label:"Description",name:"description",value:n?n.description:C.description,onChange:w,fullWidth:!0,multiline:!0,rows:3,size:"small"}),i(f,{direction:"row",spacing:2,children:[r(g,{variant:"contained",sx:{backgroundColor:l,"&:hover":{backgroundColor:"#157347"}},onClick:n?z:D,disabled:y,children:n?"Update":"Add"}),n&&r(g,{variant:"outlined",onClick:()=>u(null),children:"Cancel"})]})]})]})}),r(d,{variant:"h6",sx:{mt:3,mb:2,fontWeight:"bold",color:l},children:"Levels List"}),y?r($,{}):h.length===0?r(d,{variant:"body2",children:"No levels available."}):h.map(e=>r(A,{sx:{mb:2,p:2,backgroundColor:"#f9f9f9"},children:i(N,{children:[r(d,{variant:"subtitle1",fontWeight:"bold",color:l,children:e.name.charAt(0).toUpperCase()+e.name.slice(1)}),r(d,{variant:"body2",color:"text.secondary",children:e.description||"No description"}),i(f,{direction:"row",spacing:2,sx:{mt:2},children:[r(g,{variant:"outlined",sx:{color:l,borderColor:l},onClick:()=>u(e),children:"Edit"}),r(g,{variant:"outlined",sx:{color:"#dc3545",borderColor:"#dc3545"},onClick:()=>I(e._id),children:"Delete"})]})]})},e._id))]})};export{te as default};
