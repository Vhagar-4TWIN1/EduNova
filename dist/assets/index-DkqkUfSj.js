import{r as s,a as b,j as i,b as r,a3 as d,a6 as U,a7 as j,a8 as O,ad as B,a5 as F}from"./index-C3nL3Q8Y.js";import{C as H,S as E}from"./Snackbar-BdcvMXDv.js";import{A as W}from"./Alert-ByAO8-9K.js";import{C as A}from"./Card-BM1iOIYZ.js";import{C as N}from"./CardContent-DB49xfDB.js";import{S as f}from"./Stack-CAonYs3f.js";import{M as T}from"./MenuItem-NIEDGLUA.js";import{B as g}from"./Button-Dg9Z3r8Z.js";import"./useThemeProps-CRU2mqAJ.js";import"./getThemeProps-DLbyqOGa.js";import"./ClickAwayListener-C_h-5Qdg.js";import"./Close-ChL254u0.js";import"./listItemTextClasses-B7Ux6p96.js";const re=()=>{const[h,p]=s.useState([]),[C,y]=s.useState({name:"",description:""}),[l,u]=s.useState(null),[L,x]=s.useState(!0),[S,c]=s.useState(null),[k,m]=s.useState(null),_=["beginner","intermediate","advanced"];s.useEffect(()=>{D()},[]);const D=async()=>{var e,a;try{x(!0);const t=await b.get("http://localhost:3000/api/level");p(t.data.data),c(null)}catch(t){c(((a=(e=t.response)==null?void 0:e.data)==null?void 0:a.error)||"Error fetching levels")}finally{x(!1)}},z=async()=>{var e,a;try{const t=await b.post("http://localhost:3000/api/level",C);p([...h,t.data.data]),y({name:"",description:""}),m("Level created successfully")}catch(t){c(((a=(e=t.response)==null?void 0:e.data)==null?void 0:a.error)||"Error creating level")}},I=async()=>{var e,a;try{const t=await b.put(`http://localhost:3000/api/level/${l._id}`,l);p(h.map(n=>n._id===l._id?t.data.data:n)),u(null),m("Level updated successfully")}catch(t){c(((a=(e=t.response)==null?void 0:e.data)==null?void 0:a.error)||"Error updating level")}},M=async e=>{var a,t;try{await b.delete(`http://localhost:3000/api/level/${e}`),p(h.filter(n=>n._id!==e)),m("Level deleted successfully")}catch(n){c(((t=(a=n.response)==null?void 0:a.data)==null?void 0:t.error)||"Error deleting level")}},w=e=>{const{name:a,value:t}=e.target;l?u(n=>({...n,[a]:t})):y(n=>({...n,[a]:t}))},v=()=>{c(null),m(null)},o="#198754";return i(H,{maxWidth:"md",sx:{mt:4},children:[r(d,{variant:"h4",sx:{mb:3,textAlign:"center",fontWeight:"bold",color:o},children:"Level Management"}),r(E,{open:!!S,autoHideDuration:6e3,onClose:v,anchorOrigin:{vertical:"top",horizontal:"center"},children:r(W,{severity:"error",onClose:v,children:S})}),r(E,{open:!!k,autoHideDuration:6e3,onClose:v,anchorOrigin:{vertical:"top",horizontal:"center"},children:r(W,{severity:"success",onClose:v,children:k})}),r(A,{sx:{mb:3,p:2,borderColor:o,borderWidth:1,borderStyle:"solid"},children:i(N,{children:[r(d,{variant:"h6",sx:{mb:2,fontWeight:"bold",color:o},children:l?"Edit Level":"Add New Level"}),i(f,{spacing:2,children:[i(U,{fullWidth:!0,size:"small",children:[r(j,{id:"level-name-label",children:"Name *"}),r(O,{labelId:"level-name-label",label:"Name *",name:"name",value:l?l.name:C.name,onChange:w,required:!0,children:_.map(e=>r(T,{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),r(B,{label:"Description",name:"description",value:l?l.description:C.description,onChange:w,fullWidth:!0,multiline:!0,rows:3,size:"small"}),i(f,{direction:"row",spacing:2,children:[r(g,{variant:"contained",sx:{backgroundColor:o,"&:hover":{backgroundColor:"#157347"}},onClick:l?I:z,disabled:L,children:l?"Update":"Add"}),l&&r(g,{variant:"outlined",onClick:()=>u(null),children:"Cancel"})]})]})]})}),r(d,{variant:"h6",sx:{mt:3,mb:2,fontWeight:"bold",color:o},children:"Levels List"}),L?r(F,{}):h.length===0?r(d,{variant:"body2",children:"No levels available."}):h.map(e=>r(A,{sx:{mb:2,p:2,backgroundColor:"#f9f9f9"},children:i(N,{children:[r(d,{variant:"subtitle1",fontWeight:"bold",color:o,children:e.name.charAt(0).toUpperCase()+e.name.slice(1)}),r(d,{variant:"body2",color:"text.secondary",children:e.description||"No description"}),i(f,{direction:"row",spacing:2,sx:{mt:2},children:[r(g,{variant:"outlined",sx:{color:o,borderColor:o},onClick:()=>u(e),children:"Edit"}),r(g,{variant:"outlined",sx:{color:"#dc3545",borderColor:"#dc3545"},onClick:()=>M(e._id),children:"Delete"})]})]})},e._id))]})};export{re as default};
