import{r as s,a as b,j as t,b as e}from"./index-C3nL3Q8Y.js";const q=()=>{const[N,y]=s.useState([]),[x,g]=s.useState(!1),[p,m]=s.useState(""),[l,d]=s.useState(null),[r,C]=s.useState(1),[f,U]=s.useState(1),[A,P]=s.useState(0),S=5;s.useEffect(()=>{u()},[r]);const h=localStorage.getItem("token"),u=async()=>{g(!0);try{const a=await b.get(`http://localhost:3000/api/users?page=${r}&limit=${S}`,{headers:{Authorization:`Bearer ${h}`},withCredentials:!0}),{users:n,totalPages:c,totalUsers:o}=a.data;y(n),U(c),P(o)}catch{m("Failed to fetch users")}g(!1)},w=a=>{d({...a})},$=async a=>{a.preventDefault();try{await b.patch(`http://localhost:3000/api/users/${l._id}`,l,{headers:{Authorization:`Bearer ${h}`}}),u(),d(null)}catch{m("Failed to update user")}},i=a=>{const{name:n,value:c,type:o}=a.target;d(o==="file"?{...l,photo:a.target.files[0]}:{...l,[n]:o==="number"?Number(c):c})},k=async a=>{if(window.confirm("Are you sure you want to delete this user?"))try{await b.delete(`http://localhost:3000/api/users/${a}`,{headers:{Authorization:`Bearer ${h}`}}),u()}catch{m("Failed to delete user")}},v=a=>{C(a)};return t("div",{className:"app-wrapper",children:[e("div",{className:"app-content pt-3 p-md-3 p-lg-4",children:t("div",{className:"container-xl",children:[e("h2",{className:"mb-4 text-center",children:"Users Management"}),p&&e("div",{className:"alert alert-danger",children:p}),x?e("div",{className:"text-center",children:e("div",{className:"spinner-border text-primary"})}):e("div",{className:"table-responsive",style:{minHeight:"60vh"},children:t("table",{className:"table table-striped table-bordered fs-4",children:[e("thead",{className:"bg-primary text-white",children:t("tr",{children:[e("th",{children:"#"}),e("th",{children:"First Name"}),e("th",{children:"Last Name"}),e("th",{children:"Age"}),e("th",{children:"Email"}),e("th",{children:"Country"}),e("th",{children:"Verified"}),e("th",{children:"Actions"})]})}),e("tbody",{children:N.length>0?N.map((a,n)=>t("tr",{children:[e("td",{children:n+1}),e("td",{children:a.firstName}),e("td",{children:a.lastName}),e("td",{children:a.age}),e("td",{children:a.email}),e("td",{children:a.country}),e("td",{children:e("span",{className:`badge ${a.verified?"bg-success":"bg-warning"}`,children:a.verified?"Verified":"Pending"})}),e("td",{children:t("div",{className:"d-flex",children:[e("button",{className:"btn btn-warning btn-lg me-2","data-bs-toggle":"modal","data-bs-target":"#editModal",onClick:()=>w(a),children:"Edit"}),e("button",{className:"btn btn-danger btn-lg",onClick:()=>k(a._id),children:"Delete"})]})})]},a._id)):e("tr",{children:e("td",{colSpan:"8",className:"text-center",children:"No users found"})})})]})}),t("div",{className:"d-flex justify-content-center mt-3",children:[e("button",{className:"btn btn-primary btn-lg me-2",disabled:r===1,onClick:()=>v(r-1),children:"Previous"}),e("span",{className:"align-self-center",children:`Page ${r} of ${f}`}),e("button",{className:"btn btn-primary btn-lg ms-2",disabled:r===f,onClick:()=>v(r+1),children:"Next"})]})]})}),e("div",{className:"modal fade",id:"editModal",tabIndex:"-1","aria-labelledby":"editModalLabel","aria-hidden":"true",children:e("div",{className:"modal-dialog",children:t("div",{className:"modal-content",children:[t("div",{className:"modal-header",children:[e("h1",{className:"modal-title fs-5",id:"editModalLabel",children:"Update User"}),e("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),e("div",{className:"modal-body",children:l&&t("form",{onSubmit:$,children:[t("div",{className:"mb-3",children:[e("label",{className:"form-label",children:"First Name"}),e("input",{type:"text",className:"form-control",name:"firstName",value:l.firstName||"",onChange:i,required:!0})]}),t("div",{className:"mb-3",children:[e("label",{className:"form-label",children:"Last Name"}),e("input",{type:"text",className:"form-control",name:"lastName",value:l.lastName||"",onChange:i,required:!0})]}),t("div",{className:"mb-3",children:[e("label",{className:"form-label",children:"Age"}),e("input",{type:"number",className:"form-control",name:"age",value:l.age||"",onChange:i,required:!0})]}),t("div",{className:"mb-3",children:[e("label",{className:"form-label",children:"Email"}),e("input",{type:"email",className:"form-control",name:"email",value:l.email||"",onChange:i,required:!0})]}),t("div",{className:"mb-3",children:[e("label",{className:"form-label",children:"Country"}),e("input",{type:"text",className:"form-control",name:"country",value:l.country||"",onChange:i,required:!0})]}),t("div",{className:"mb-3",children:[e("label",{className:"form-label",children:"Verified"}),t("select",{className:"form-select",name:"verified",value:l.verified,onChange:i,required:!0,children:[e("option",{value:!1,children:"Pending"}),e("option",{value:!0,children:"Verified"})]})]}),t("div",{className:"modal-footer",children:[e("button",{type:"submit",className:"btn btn-primary",children:"Save changes"}),e("button",{className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"})]})]})})]})})})]})};export{q as default};
