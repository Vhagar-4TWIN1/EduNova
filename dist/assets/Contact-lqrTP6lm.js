import{b as g,u as Y}from"./vendor-gGFwV6Yc.js";import{ab as m,ac as Z,j as u,b as n,L as Q,d as ee,m as K,h as te,a as J,y as k}from"./index-CNYIw3Ap.js";import{S as re,s as X,a as ne}from"./SectionWrapper-DSH-moLP.js";import{S as ae}from"./Earth-Dlw-aQut.js";var ie=["sitekey","onChange","theme","type","tabindex","onExpired","onErrored","size","stoken","grecaptcha","badge","hl","isolated"];function V(){return V=Object.assign?Object.assign.bind():function(a){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(a[t]=o[t])}return a},V.apply(this,arguments)}function oe(a,e){if(a==null)return{};var o={},t=Object.keys(a),r,l;for(l=0;l<t.length;l++)r=t[l],!(e.indexOf(r)>=0)&&(o[r]=a[r]);return o}function U(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function se(a,e){a.prototype=Object.create(e.prototype),a.prototype.constructor=a,W(a,e)}function W(a,e){return W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},W(a,e)}var q=function(a){se(e,a);function e(){var t;return t=a.call(this)||this,t.handleExpired=t.handleExpired.bind(U(t)),t.handleErrored=t.handleErrored.bind(U(t)),t.handleChange=t.handleChange.bind(U(t)),t.handleRecaptchaRef=t.handleRecaptchaRef.bind(U(t)),t}var o=e.prototype;return o.getCaptchaFunction=function(r){return this.props.grecaptcha?this.props.grecaptcha.enterprise?this.props.grecaptcha.enterprise[r]:this.props.grecaptcha[r]:null},o.getValue=function(){var r=this.getCaptchaFunction("getResponse");return r&&this._widgetId!==void 0?r(this._widgetId):null},o.getWidgetId=function(){return this.props.grecaptcha&&this._widgetId!==void 0?this._widgetId:null},o.execute=function(){var r=this.getCaptchaFunction("execute");if(r&&this._widgetId!==void 0)return r(this._widgetId);this._executeRequested=!0},o.executeAsync=function(){var r=this;return new Promise(function(l,E){r.executionResolve=l,r.executionReject=E,r.execute()})},o.reset=function(){var r=this.getCaptchaFunction("reset");r&&this._widgetId!==void 0&&r(this._widgetId)},o.forceReset=function(){var r=this.getCaptchaFunction("reset");r&&r()},o.handleExpired=function(){this.props.onExpired?this.props.onExpired():this.handleChange(null)},o.handleErrored=function(){this.props.onErrored&&this.props.onErrored(),this.executionReject&&(this.executionReject(),delete this.executionResolve,delete this.executionReject)},o.handleChange=function(r){this.props.onChange&&this.props.onChange(r),this.executionResolve&&(this.executionResolve(r),delete this.executionReject,delete this.executionResolve)},o.explicitRender=function(){var r=this.getCaptchaFunction("render");if(r&&this._widgetId===void 0){var l=document.createElement("div");this._widgetId=r(l,{sitekey:this.props.sitekey,callback:this.handleChange,theme:this.props.theme,type:this.props.type,tabindex:this.props.tabindex,"expired-callback":this.handleExpired,"error-callback":this.handleErrored,size:this.props.size,stoken:this.props.stoken,hl:this.props.hl,badge:this.props.badge,isolated:this.props.isolated}),this.captcha.appendChild(l)}this._executeRequested&&this.props.grecaptcha&&this._widgetId!==void 0&&(this._executeRequested=!1,this.execute())},o.componentDidMount=function(){this.explicitRender()},o.componentDidUpdate=function(){this.explicitRender()},o.handleRecaptchaRef=function(r){this.captcha=r},o.render=function(){var r=this.props;r.sitekey,r.onChange,r.theme,r.type,r.tabindex,r.onExpired,r.onErrored,r.size,r.stoken,r.grecaptcha,r.badge,r.hl,r.isolated;var l=oe(r,ie);return g.createElement("div",V({},l,{ref:this.handleRecaptchaRef}))},e}(g.Component);q.displayName="ReCAPTCHA";q.propTypes={sitekey:m.string.isRequired,onChange:m.func,grecaptcha:m.object,theme:m.oneOf(["dark","light"]),type:m.oneOf(["image","audio"]),tabindex:m.number,onExpired:m.func,onErrored:m.func,size:m.oneOf(["compact","normal","invisible"]),stoken:m.string,hl:m.string,badge:m.oneOf(["bottomright","bottomleft","inline"]),isolated:m.bool};q.defaultProps={onChange:function(){},theme:"light",type:"image",tabindex:0,size:"normal",badge:"bottomright"};function $(){return $=Object.assign||function(a){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(a[t]=o[t])}return a},$.apply(this,arguments)}function ce(a,e){if(a==null)return{};var o={},t=Object.keys(a),r,l;for(l=0;l<t.length;l++)r=t[l],!(e.indexOf(r)>=0)&&(o[r]=a[r]);return o}function le(a,e){a.prototype=Object.create(e.prototype),a.prototype.constructor=a,a.__proto__=e}var S={},de=0;function pe(a,e){return e=e||{},function(t){var r=t.displayName||t.name||"Component",l=function(d){le(I,d);function I(v,s){var i;return i=d.call(this,v,s)||this,i.state={},i.__scriptURL="",i}var y=I.prototype;return y.asyncScriptLoaderGetScriptLoaderID=function(){return this.__scriptLoaderID||(this.__scriptLoaderID="async-script-loader-"+de++),this.__scriptLoaderID},y.setupScriptURL=function(){return this.__scriptURL=typeof a=="function"?a():a,this.__scriptURL},y.asyncScriptLoaderHandleLoad=function(s){var i=this;this.setState(s,function(){return i.props.asyncScriptOnLoad&&i.props.asyncScriptOnLoad(i.state)})},y.asyncScriptLoaderTriggerOnScriptLoaded=function(){var s=S[this.__scriptURL];if(!s||!s.loaded)throw new Error("Script is not loaded.");for(var i in s.observers)s.observers[i](s);delete window[e.callbackName]},y.componentDidMount=function(){var s=this,i=this.setupScriptURL(),p=this.asyncScriptLoaderGetScriptLoaderID(),x=e,A=x.globalName,F=x.callbackName,L=x.scriptId;if(A&&typeof window[A]<"u"&&(S[i]={loaded:!0,observers:{}}),S[i]){var O=S[i];if(O&&(O.loaded||O.errored)){this.asyncScriptLoaderHandleLoad(O);return}O.observers[p]=function(f){return s.asyncScriptLoaderHandleLoad(f)};return}var j={};j[p]=function(f){return s.asyncScriptLoaderHandleLoad(f)},S[i]={loaded:!1,observers:j};var N=document.createElement("script");N.src=i,N.async=!0;for(var P in e.attributes)N.setAttribute(P,e.attributes[P]);L&&(N.id=L);var B=function(D){if(S[i]){var H=S[i],w=H.observers;for(var c in w)D(w[c])&&delete w[c]}};F&&typeof window<"u"&&(window[F]=function(){return s.asyncScriptLoaderTriggerOnScriptLoaded()}),N.onload=function(){var f=S[i];f&&(f.loaded=!0,B(function(D){return F?!1:(D(f),!0)}))},N.onerror=function(){var f=S[i];f&&(f.errored=!0,B(function(D){return D(f),!0}))},document.body.appendChild(N)},y.componentWillUnmount=function(){var s=this.__scriptURL;if(e.removeOnUnmount===!0)for(var i=document.getElementsByTagName("script"),p=0;p<i.length;p+=1)i[p].src.indexOf(s)>-1&&i[p].parentNode&&i[p].parentNode.removeChild(i[p]);var x=S[s];x&&(delete x.observers[this.asyncScriptLoaderGetScriptLoaderID()],e.removeOnUnmount===!0&&delete S[s])},y.render=function(){var s=e.globalName,i=this.props;i.asyncScriptOnLoad;var p=i.forwardedRef,x=ce(i,["asyncScriptOnLoad","forwardedRef"]);return s&&typeof window<"u"&&(x[s]=typeof window[s]<"u"?window[s]:void 0),x.ref=p,g.createElement(t,x)},I}(g.Component),E=g.forwardRef(function(d,I){return g.createElement(l,$({},d,{forwardedRef:I}))});return E.displayName="AsyncScriptLoader("+r+")",E.propTypes={asyncScriptOnLoad:m.func},Z(E,t)}}var G="onloadcallback",ue="grecaptcha";function M(){return typeof window<"u"&&window.recaptchaOptions||{}}function he(){var a=M(),e=a.useRecaptchaNet?"recaptcha.net":"www.google.com";return a.enterprise?"https://"+e+"/recaptcha/enterprise.js?onload="+G+"&render=explicit":"https://"+e+"/recaptcha/api.js?onload="+G+"&render=explicit"}const fe=pe(he,{callbackName:G,globalName:ue,attributes:M().nonce?{nonce:M().nonce}:{}})(q),me=()=>{const a=Y(),[e,o]=g.useState({firstName:"",lastName:"",age:"",email:"",password:"",country:""}),[t,r]=g.useState("Student"),[l,E]=g.useState(null),[d,I]=g.useState({}),[y,v]=g.useState(null),[s,i]=g.useState(null),[p,x]=g.useState(!1),[A,F]=g.useState(!1),L=c=>{o({...e,[c.target.name]:c.target.value})},O=c=>{r(c),o({firstName:"",lastName:"",age:"",email:"",password:"",country:""}),v(null),i(null)},j=()=>{const c={};e.firstName||(c.firstName="First name is required"),e.lastName||(c.lastName="Last name is required"),(!e.email||!/\S+@\S+\.\S+/.test(e.email))&&(c.email="Valid email is required"),(!e.age||e.age<18)&&(c.age="Age must be at least 18");const h=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/;return(!e.password||!h.test(e.password))&&(c.password="Password must be at least 8 characters long and include at least one uppercase letter, one lowercase letter, and one number."),e.country||(c.country="Country is required"),l||(c.recaptcha="Please verify reCAPTCHA"),I(c),Object.keys(c).length===0},N=c=>{const h=c.target.files[0];if(h){if(h.size>5*1024*1024){alert("File is too large (max 5MB)");return}v(h),i(null)}},P=async()=>{var c,h,z,T,b,R;if(!y){k.error("Please upload a diploma file");return}x(!0);try{const C=new FormData;C.append("image",y);const _=await J.post("https://edunova-back-rqxc.onrender.com/api/auth/verify-diploma",C,{headers:{"Content-Type":"multipart/form-data"}});_.data.success?(i({success:!0,message:"Diploma verified successfully!",info:_.data.diplomaInfo,certificateURL:_.data.certificateURL}),k.success("Diploma verified successfully!")):(i({success:!1,message:_.data.message||"Diploma verification failed",errors:_.data.errors||{}}),k.error(_.data.message||"Diploma verification failed"))}catch(C){console.error("Verification error:",C),i({success:!1,message:((h=(c=C.response)==null?void 0:c.data)==null?void 0:h.message)||"Error during diploma verification",errors:((T=(z=C.response)==null?void 0:z.data)==null?void 0:T.errors)||{system:"Network error"}}),k.error(((R=(b=C.response)==null?void 0:b.data)==null?void 0:R.message)||"Error during diploma verification")}finally{x(!1)}},B=c=>{try{return JSON.parse(atob(c.split(".")[1]))}catch{return null}},f=()=>{new Audio("/sounds/notification.wav").play()},D=()=>{console.log("Break timer started"),setInterval(()=>{k.warn("‚è≥ Time for a break! You've been active for an hour.",{position:"top-right",autoClose:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),f()},1e4)},H=async c=>{var h,z,T;if(c.preventDefault(),!!j()){if(t==="Teacher"){if(!y){alert("Please upload your diploma");return}if(!s||!s.success){alert("Please verify your diploma before submitting");return}}F(!0);try{const b={firstName:e.firstName,lastName:e.lastName,age:e.age,email:e.email,password:e.password,country:e.country,role:t};t==="Teacher"&&(b.workCertificate=s.certificateURL,b.bio="",b.experience="",b.cin="",b.number="");const R=await J.post("https://edunova-back-rqxc.onrender.com/api/auth/signup",b,{headers:{"recaptcha-token":l,"Content-Type":"application/json"}});if(R.data.success){const C=R.data.token;localStorage.setItem("token",C),localStorage.setItem("userId",R.data.user.id),localStorage.setItem("firstName",R.data.user.firstName),localStorage.setItem("lastName",R.data.user.lastName),localStorage.setItem("role",R.data.user.role);const _=B(C);if(!_||!_.userId){alert("Invalid token.");return}t==="Teacher"?k.info(u("div",{style:{textAlign:"center"},children:[n("h3",{children:"You will pass a test to test your level"}),u("div",{style:{margin:"20px 0",textAlign:"left"},children:[n("p",{children:n("strong",{children:"Instructions:"})}),u("ul",{style:{listStyleType:"disc",paddingLeft:"20px"},children:[n("li",{children:"Only one person allowed in camera view"}),n("li",{children:"Face must be centered and visible at all times"}),n("li",{children:"No looking away from the screen"}),n("li",{children:"No switching tabs/windows"}),n("li",{children:"No copy/paste allowed"}),n("li",{children:"No speaking or communicating with others"})]})]}),n("button",{onClick:()=>{k.dismiss(),a("/exam"),D()},style:{padding:"10px 20px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"16px",fontWeight:"bold"},children:"I Understand - Start Test"})]}),{position:"top-center",autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,style:{minWidth:"500px",maxWidth:"600px",padding:"20px"}}):a("/home"),k.success("Registration successful!",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),o({firstName:"",lastName:"",age:"",email:"",password:"",country:""}),v(null),i(null)}else k.error(R.data.message||"Registration failed",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}catch(b){console.error("Error:",((h=b.response)==null?void 0:h.data)||b.message),k.error(((T=(z=b.response)==null?void 0:z.data)==null?void 0:T.message)||"An error occurred during registration",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}finally{F(!1)}}},w={padding:"12px",fontSize:"16px",borderRadius:"8px",border:"1px solid #ccc",width:"100%",boxSizing:"border-box",marginBottom:"16px",backgroundColor:"#fff"};return u("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",width:"100vw",padding:"20px",paddingBottom:"150px",position:"relative"},children:[n(Q,{customStyle:{top:"-120px",right:"0px"}}),n(ee,{}),u(K.div,{variants:X("left","tween",.7,1),style:{flex:1,maxWidth:"800px",backgroundColor:"#f2f2f2",padding:"50px",borderRadius:"16px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)"},children:[n("h3",{className:ne.sectionSubText,style:{fontSize:"50px"},children:"Welcome"}),u("div",{style:{marginBottom:"20px"},children:[n("button",{onClick:()=>O("Student"),style:{padding:"16px 32px",backgroundColor:t==="Student"?"#4CAF50":"#ccc",color:"white",border:"none",borderRadius:"12px",cursor:"pointer",fontSize:"18px",transition:"background-color 0.3s ease"},children:"Student"}),n("button",{onClick:()=>O("Teacher"),style:{padding:"16px 32px",backgroundColor:t==="Teacher"?"#4CAF50":"#ccc",color:"white",border:"none",borderRadius:"12px",cursor:"pointer",fontSize:"18px",transition:"background-color 0.3s ease",marginLeft:"10px"},children:"Teacher"})]}),u("form",{onSubmit:H,style:{display:"flex",flexDirection:"column",gap:"32px",marginTop:"32px"},children:[u("label",{style:{display:"flex",flexDirection:"column",fontSize:"20px"},children:[n("span",{style:{color:"black",marginBottom:"8px",fontSize:"20px"},children:"First Name*"}),n("input",{type:"text",name:"firstName",value:e.firstName,onChange:L,required:!0,style:w}),d.firstName&&n("span",{style:{color:"red"},children:d.firstName})]}),u("label",{style:{display:"flex",flexDirection:"column",fontSize:"20px"},children:[n("span",{style:{color:"black",marginBottom:"8px",fontSize:"20px"},children:"Last Name*"}),n("input",{type:"text",name:"lastName",value:e.lastName,onChange:L,required:!0,style:w}),d.lastName&&n("span",{style:{color:"red"},children:d.lastName})]}),t==="Teacher"&&u(te,{children:[u("label",{style:{display:"flex",flexDirection:"column",fontSize:"20px"},children:[n("span",{style:{color:"black",marginBottom:"8px",fontSize:"20px"},children:"Diploma (PDF/Image)*"}),n("input",{type:"file",name:"diploma",onChange:N,accept:"image/*,.pdf",style:w,disabled:p})]}),n("button",{type:"button",onClick:P,disabled:p||!y,style:{padding:"12px 24px",backgroundColor:"#2196F3",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"16px",marginBottom:"16px",opacity:p||!y?.7:1},children:p?"Verifying...":"Verify Diploma"}),s&&u("div",{style:{padding:"12px",marginBottom:"16px",backgroundColor:s.success?"#E8F5E9":"#FFEBEE",borderLeft:`4px solid ${s.success?"#4CAF50":"#F44336"}`,color:s.success?"#2E7D32":"#C62828"},children:[s.message,s.errors&&Object.keys(s.errors).length>0&&n("ul",{style:{marginTop:"8px",paddingLeft:"20px"},children:Object.entries(s.errors).map(([c,h])=>h&&n("li",{children:h},c))})]})]}),u("label",{style:{display:"flex",flexDirection:"column",fontSize:"20px"},children:[n("span",{style:{color:"black",marginBottom:"8px",fontSize:"20px"},children:"Email*"}),n("input",{type:"email",name:"email",value:e.email,onChange:L,required:!0,style:w}),d.email&&n("span",{style:{color:"red"},children:d.email})]}),u("label",{style:{display:"flex",flexDirection:"column",fontSize:"20px"},children:[n("span",{style:{color:"black",marginBottom:"8px",fontSize:"20px"},children:"Age*"}),n("input",{type:"number",name:"age",value:e.age,onChange:L,required:!0,style:w}),d.age&&n("span",{style:{color:"red"},children:d.age})]}),u("label",{style:{display:"flex",flexDirection:"column",fontSize:"20px"},children:[n("span",{style:{color:"black",marginBottom:"8px",fontSize:"20px"},children:"Password*"}),n("input",{type:"password",name:"password",value:e.password,onChange:L,required:!0,style:w}),d.password&&n("span",{style:{color:"red"},children:d.password})]}),u("label",{style:{display:"flex",flexDirection:"column",fontSize:"20px"},children:[n("span",{style:{color:"black",marginBottom:"8px",fontSize:"20px"},children:"Country*"}),n("input",{type:"text",name:"country",value:e.country,onChange:L,required:!0,style:w}),d.country&&n("span",{style:{color:"red"},children:d.country})]}),n(fe,{sitekey:"6LeR2eIqAAAAACc0qs2KlTrKqXNpV6RF4NXL1Ggj",onChange:c=>E(c)}),d.recaptcha&&n("span",{style:{color:"red"},children:d.recaptcha}),n("button",{type:"submit",disabled:A||p,style:{padding:"16px 32px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"12px",cursor:"pointer",fontSize:"18px",transition:"background-color 0.3s ease",opacity:A||p?.7:1},children:A?"Registering...":"Register"})]})]}),n(K.div,{variants:X("right","tween",.6,1),style:{flex:1.5,maxWidth:"800px",height:"800px"},children:n(ae,{})})]})},ve=re(me,"contact");export{ve as default};
