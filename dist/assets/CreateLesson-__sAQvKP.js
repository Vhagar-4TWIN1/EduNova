import{U as X,S as H,r as C,W as Y,_ as Z,E as h,b as a,Z as S,V as G,a0 as J,X as ee,j as d,$ as b,bb as z,a1 as W,bc as N,ap as re,x as te,ad as B,ae,a4 as U,a3 as A,ab as oe,a as I}from"./index-C3nL3Q8Y.js";import{C as ne}from"./Card-BM1iOIYZ.js";import{C as ie}from"./CardHeader-CEqvS9Zm.js";import{C as se}from"./CardContent-DB49xfDB.js";import{S as j}from"./Stack-CAonYs3f.js";import{M as R}from"./MenuItem-NIEDGLUA.js";import{B as w}from"./Button-Dg9Z3r8Z.js";import{D as le}from"./Delete-CuAI51Yz.js";import{A as de}from"./Add-DzKt5l_V.js";import"./useThemeProps-CRU2mqAJ.js";import"./getThemeProps-DLbyqOGa.js";import"./listItemTextClasses-B7Ux6p96.js";function ce(e){return X("MuiCardActions",e)}H("MuiCardActions",["root","spacing"]);const ue=["disableSpacing","className"],pe=e=>{const{classes:r,disableSpacing:t}=e;return J({root:["root",!t&&"spacing"]},ce,r)},fe=S("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[r.root,!t.disableSpacing&&r.spacing]}})(({ownerState:e})=>h({display:"flex",alignItems:"center",padding:8},!e.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),me=C.forwardRef(function(r,t){const s=Y({props:r,name:"MuiCardActions"}),{disableSpacing:l=!1,className:f}=s,g=Z(s,ue),v=h({},s,{disableSpacing:l}),c=pe(v);return a(fe,h({className:G(c.root,f),ownerState:v,ref:t},g))});function be(e){return X("MuiLinearProgress",e)}H("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const he=["className","color","value","valueBuffer","variant"];let $=e=>e,q,E,F,O,K,V;const D=4,ge=N(q||(q=$`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`)),ve=N(E||(E=$`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`)),ye=N(F||(F=$`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`)),Ce=e=>{const{classes:r,variant:t,color:s}=e,l={root:["root",`color${b(s)}`,t],dashed:["dashed",`dashedColor${b(s)}`],bar1:["bar",`barColor${b(s)}`,(t==="indeterminate"||t==="query")&&"bar1Indeterminate",t==="determinate"&&"bar1Determinate",t==="buffer"&&"bar1Buffer"],bar2:["bar",t!=="buffer"&&`barColor${b(s)}`,t==="buffer"&&`color${b(s)}`,(t==="indeterminate"||t==="query")&&"bar2Indeterminate",t==="buffer"&&"bar2Buffer"]};return J(l,be,r)},T=(e,r)=>r==="inherit"?"currentColor":e.vars?e.vars.palette.LinearProgress[`${r}Bg`]:e.palette.mode==="light"?W.lighten(e.palette[r].main,.62):W.darken(e.palette[r].main,.5),xe=S("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[r.root,r[`color${b(t.color)}`],r[t.variant]]}})(({ownerState:e,theme:r})=>h({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:T(r,e.color)},e.color==="inherit"&&e.variant!=="buffer"&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},e.variant==="buffer"&&{backgroundColor:"transparent"},e.variant==="query"&&{transform:"rotate(180deg)"})),Le=S("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[r.dashed,r[`dashedColor${b(t.color)}`]]}})(({ownerState:e,theme:r})=>{const t=T(r,e.color);return h({position:"absolute",marginTop:0,height:"100%",width:"100%"},e.color==="inherit"&&{opacity:.3},{backgroundImage:`radial-gradient(${t} 0%, ${t} 16%, transparent 42%)`,backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})},z(O||(O=$`
    animation: ${0} 3s infinite linear;
  `),ye)),Pe=S("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[r.bar,r[`barColor${b(t.color)}`],(t.variant==="indeterminate"||t.variant==="query")&&r.bar1Indeterminate,t.variant==="determinate"&&r.bar1Determinate,t.variant==="buffer"&&r.bar1Buffer]}})(({ownerState:e,theme:r})=>h({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:e.color==="inherit"?"currentColor":(r.vars||r).palette[e.color].main},e.variant==="determinate"&&{transition:`transform .${D}s linear`},e.variant==="buffer"&&{zIndex:1,transition:`transform .${D}s linear`}),({ownerState:e})=>(e.variant==="indeterminate"||e.variant==="query")&&z(K||(K=$`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    `),ge)),ke=S("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[r.bar,r[`barColor${b(t.color)}`],(t.variant==="indeterminate"||t.variant==="query")&&r.bar2Indeterminate,t.variant==="buffer"&&r.bar2Buffer]}})(({ownerState:e,theme:r})=>h({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},e.variant!=="buffer"&&{backgroundColor:e.color==="inherit"?"currentColor":(r.vars||r).palette[e.color].main},e.color==="inherit"&&{opacity:.3},e.variant==="buffer"&&{backgroundColor:T(r,e.color),transition:`transform .${D}s linear`}),({ownerState:e})=>(e.variant==="indeterminate"||e.variant==="query")&&z(V||(V=$`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
    `),ve)),Re=C.forwardRef(function(r,t){const s=Y({props:r,name:"MuiLinearProgress"}),{className:l,color:f="primary",value:g,valueBuffer:v,variant:c="indeterminate"}=s,_=Z(s,he),y=h({},s,{color:f,variant:c}),x=Ce(y),L=ee(),P={},k={bar1:{},bar2:{}};if((c==="determinate"||c==="buffer")&&g!==void 0){P["aria-valuenow"]=Math.round(g),P["aria-valuemin"]=0,P["aria-valuemax"]=100;let m=g-100;L&&(m=-m),k.bar1.transform=`translateX(${m}%)`}if(c==="buffer"&&v!==void 0){let m=(v||0)-100;L&&(m=-m),k.bar2.transform=`translateX(${m}%)`}return d(xe,h({className:G(x.root,l),ownerState:y,role:"progressbar"},P,{ref:t},_,{children:[c==="buffer"?a(Le,{className:x.dashed,ownerState:y}):null,a(Pe,{className:x.bar1,ownerState:y,style:k.bar1}),c==="determinate"?null:a(ke,{className:x.bar2,ownerState:y,style:k.bar2})]}))}),$e=re(a("path",{d:"M5 20h14v-2H5zm0-10h4v6h6v-6h4l-7-7z"}),"Upload"),We=()=>{const e=te(),r={title:"",file:null,fileUrl:"",public_id:""},[t,s]=C.useState({content:"",typeLesson:"",module:""}),[l,f]=C.useState([{...r}]),[g,v]=C.useState(!1),[c,_]=C.useState(0),[y,x]=C.useState([]);C.useEffect(()=>{(async()=>{const i=localStorage.getItem("token");try{const n=await I.get("https://edunova-back-rqxc.onrender.com/module",{headers:{Authorization:`Bearer ${i}`}});x(n.data.modules||n.data)}catch(n){console.error("Error fetching modules:",n)}})()},[]);const L=o=>{const{name:i,value:n}=o.target;s({...t,[i]:n})},P=async o=>{const i="https://api.cloudinary.com/v1_1/dcf7pbfes/auto/upload",n=new FormData;return n.append("file",o),n.append("upload_preset","edunova_preset"),(await I.post(i,n,{onUploadProgress:u=>{const M=Math.round(u.loaded*100/u.total);_(M)}})).data},k=async()=>{var i,n,p;const o=localStorage.getItem("token");if(!o)return alert("You are not logged in.");try{v(!0);for(const u of l){const M=await P(u.file);await I.post("https://edunova-back-rqxc.onrender.com/api/lessons",{title:u.title,content:t.content,typeLesson:t.typeLesson,module:t.module,fileUrl:M.secure_url,public_id:M.public_id},{headers:{Authorization:`Bearer ${o}`}})}alert("Lectures uploaded successfully âœ…"),f([{...r}]),s({content:"",typeLesson:"",module:""}),_(0)}catch(u){console.error("âŒ Error creating lessons:",((i=u.response)==null?void 0:i.data)||u.message),alert(((p=(n=u.response)==null?void 0:n.data)==null?void 0:p.error)||"Error while creating lessons")}finally{v(!1)}},m=t.content.trim()&&t.typeLesson.trim()&&t.module&&l.every(o=>o.title.trim()&&o.file),Q=o=>{const i=URL.createObjectURL(o);return o.type.includes("video")?a("video",{controls:!0,src:i,width:"100%",style:{borderRadius:8}}):o.type.includes("image")?a("img",{src:i,alt:"preview",width:"100%",style:{borderRadius:8}}):o.type.includes("audio")?a("audio",{controls:!0,src:i,style:{width:"100%"}}):o.type.includes("pdf")?a("iframe",{src:i,title:"PDF Preview",width:"100%",height:"400px",style:{borderRadius:8,border:"1px solid #ccc"}}):a(A,{variant:"body2",children:"Unsupported file type"})};return d(ne,{sx:{p:4,borderRadius:4,boxShadow:e.shadows[6],background:e.palette.background.paper},children:[a(ie,{title:"ðŸŽ“ Create Course Curriculum",titleTypographyProps:{fontSize:26,fontWeight:700},sx:{pb:0}}),d(se,{children:[d(j,{spacing:4,children:[a(B,{label:"Lesson Content",name:"content",value:t.content,onChange:L,fullWidth:!0,multiline:!0,rows:4,variant:"outlined"}),a(B,{select:!0,label:"Select Module",name:"module",value:t.module,onChange:L,fullWidth:!0,variant:"outlined",children:y.length===0?a(R,{disabled:!0,children:"Loading modules..."}):y.map(o=>a(R,{value:o._id,children:o.title},o._id))}),d(B,{select:!0,label:"Type of Lesson",name:"typeLesson",value:t.typeLesson,onChange:L,fullWidth:!0,variant:"outlined",children:[a(R,{value:"video",children:"Video"}),a(R,{value:"pdf",children:"PDF"}),a(R,{value:"audio",children:"Audio"}),a(R,{value:"photo",children:"Photo"})]})]}),a(ae,{sx:{my:4}}),l.map((o,i)=>d(U,{sx:{p:3,mb:4,border:`1px solid ${e.palette.divider}`,borderRadius:3,backgroundColor:e.palette.grey[50]},children:[d(A,{fontWeight:600,variant:"h6",gutterBottom:!0,children:["ðŸ“˜ Lecture ",i+1]}),d(j,{spacing:2,children:[a(B,{label:"Lecture Title",value:o.title,onChange:n=>{const p=[...l];p[i].title=n.target.value,f(p)},fullWidth:!0}),d(w,{variant:"outlined",component:"label",startIcon:a($e,{}),children:[o.file?"Replace File":"Upload File",a("input",{type:"file",accept:"video/*,image/*,application/pdf,audio/*",hidden:!0,onChange:n=>{const p=[...l];p[i].file=n.target.files[0],f(p)}})]}),o.file&&d(U,{children:[d(A,{variant:"body2",sx:{mb:1,fontStyle:"italic"},children:["ðŸŽžï¸ Selected: ",o.file.name]}),Q(o.file)]}),a(U,{display:"flex",justifyContent:"flex-end",children:a(oe,{color:"error",onClick:()=>{const n=l.filter((p,u)=>u!==i);f(n.length?n:[{...r}])},children:a(le,{})})})]})]},i)),a(w,{variant:"outlined",startIcon:a(de,{}),onClick:()=>f([...l,{...r}]),sx:{borderRadius:2,borderColor:e.palette.grey[300],px:4,fontWeight:500,color:e.palette.primary.main,"&:hover":{borderColor:e.palette.primary.main,background:e.palette.action.hover}},children:"Add Another Lecture"}),g&&d(U,{sx:{mt:3},children:[a(Re,{variant:"determinate",value:c}),d(A,{variant:"body2",mt:1,children:["Uploading: ",c,"%"]})]})]}),a(me,{sx:{justifyContent:"flex-end",p:3},children:a(w,{variant:"contained",color:"primary",size:"large",disabled:!m||g,onClick:k,sx:{borderRadius:3,px:5,py:1.2,fontSize:"1rem",fontWeight:600,textTransform:"none"},children:"ðŸš€ Submit All Lectures"})})]})};export{We as default};
