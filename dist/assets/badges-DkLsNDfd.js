import{r as a,u as v,j as c,b as t,a as n}from"./index-C3nL3Q8Y.js";const N=()=>{const[o,d]=a.useState([]),[l,i]=a.useState(null),[h,u]=a.useState([]),g=v();fetch("http://localhost/moodle/webservice/rest/server.php?wstoken=7ccfd931c34a195d815957a0759ce508&wsfunction=core_user_get_users&criteria[0][key]=email&criteria[0][value]=oussamaawledsalem98724@gmail.com&moodlewsrestformat=json").then(e=>e.json()).then(e=>{if(console.log(e),e.users&&e.users.length>0){const s=e.users[0].id;return console.log("User ID:",s),fetch(`http://localhost/moodle/webservice/rest/server.php?wstoken=7ccfd931c34a195d815957a0759ce508&wsfunction=core_enrol_get_users_courses&userid=${s}&moodlewsrestformat=json`)}else throw new Error("User not found!")}).then(e=>e.json()).then(e=>{console.log("Courses:",e)}).catch(e=>{console.error("Error:",e)});const m=e=>{console.log("Badge clicked:",e),g(`/badge/${e}`)};return a.useEffect(()=>{(async()=>{try{const s=localStorage.getItem("token"),r=localStorage.getItem("userId"),p=await n.get(`https://edunova-back-rqxc.onrender.com/api/users/badges/${r}`,{headers:{Authorization:`Bearer ${s}`}}),f=await n.get(`https://edunova-back-rqxc.onrender.com/api/users/unachieved-badges/${r}`,{headers:{Authorization:`Bearer ${s}`}});d(p.data),u(f.data)}catch(s){i("Error fetching badges"),console.error(s)}})()},[]),c("div",{className:"container-fluid py-4",children:[t("h2",{className:"text-center mb-4 mt-24",children:"User Badges"}),l&&t("p",{className:"text-danger text-center",children:l}),t("div",{className:"row gx-3 gy-4",children:[...o,...h].map((e,s)=>{const r=s<o.length;return t("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 d-flex align-items-stretch",onClick:()=>m(e._id),children:c("div",{className:`card hover-card ${r?"":"unachieved-card"}`,children:[!r&&t("div",{className:"lock-overlay",children:t("i",{className:"fas fa-lock"})}),t("img",{src:`https://edunova-back-rqxc.onrender.com/uploads/badges/${e.image}`,alt:e.title,className:"card-img-top rounded-badge"}),c("div",{className:"card-body",children:[t("h5",{className:"card-title",children:e.title}),t("p",{className:"card-text",children:e.description})]})]})},e._id)})})]})};export{N as default};
