import{r as c,u as p,j as a,b as r,a as l}from"./index-B07QrE09.js";const x=()=>{const[o,d]=c.useState([]),[n,i]=c.useState(null),[h,u]=c.useState([]),m=p();c.useEffect(()=>{document.title="Badge"},[]),fetch("http://localhost/moodle/webservice/rest/server.php?wstoken=7ccfd931c34a195d815957a0759ce508&wsfunction=core_user_get_users&criteria[0][key]=email&criteria[0][value]=oussamaawledsalem98724@gmail.com&moodlewsrestformat=json").then(e=>e.json()).then(e=>{if(console.log(e),e.users&&e.users.length>0){const s=e.users[0].id;return console.log("User ID:",s),fetch(`http://localhost/moodle/webservice/rest/server.php?wstoken=7ccfd931c34a195d815957a0759ce508&wsfunction=core_enrol_get_users_courses&userid=${s}&moodlewsrestformat=json`)}else throw new Error("User not found!")}).then(e=>e.json()).then(e=>{console.log("Courses:",e)}).catch(e=>{console.error("Error:",e)});const g=e=>{console.log("Badge clicked:",e),m(`/badge/${e}`)};return c.useEffect(()=>{(async()=>{try{const s=localStorage.getItem("token"),t=localStorage.getItem("userId"),v=await l.get(`https://edunova-back-rqxc.onrender.com/api/users/badges/${t}`,{headers:{Authorization:`Bearer ${s}`}}),f=await l.get(`https://edunova-back-rqxc.onrender.com/api/users/unachieved-badges/${t}`,{headers:{Authorization:`Bearer ${s}`}});d(v.data),u(f.data)}catch(s){i("Error fetching badges"),console.error(s)}})()},[]),a("div",{className:"container-fluid py-4",children:[r("h2",{className:"text-center mb-4 mt-24",children:"User Badges"}),n&&r("p",{className:"text-danger text-center",children:n}),r("div",{className:"row gx-3 gy-4",children:[...o,...h].map((e,s)=>{const t=s<o.length;return r("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 d-flex align-items-stretch",onClick:()=>g(e._id),children:a("div",{className:`card hover-card ${t?"":"unachieved-card"}`,children:[!t&&r("div",{className:"lock-overlay",children:r("i",{className:"fas fa-lock"})}),r("img",{src:`https://edunova-back-rqxc.onrender.com/uploads/badges/${e.image}`,alt:e.title,className:"card-img-top rounded-badge"}),a("div",{className:"card-body",children:[r("h5",{className:"card-title",children:e.title}),r("p",{className:"card-text",children:e.description})]})]})},e._id)})})]})};export{x as default};
