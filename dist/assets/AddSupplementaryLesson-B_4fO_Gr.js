import{aF as g,u as v,r as h,b as e,j as a,aG as x,aH as N,aI as w,l as F,aJ as k,a as D}from"./index-C3nL3Q8Y.js";const S=()=>{const{id:o}=g(),d=v(),[t,u]=h.useState({title:"",content:"",resourceUrl:"",type:"video",duration:0,platform:"",difficulty:"",file:null}),[p,m]=h.useState(!1),r=n=>{const{name:i,value:s}=n.target;u(c=>({...c,[i]:s}))},b=n=>{u(i=>({...i,file:n.target.files[0]}))},y=n=>{switch(n){case"video":return"https://youtube.com/...";case"article":return"https://medium.com/...";case"exercise":return"https://exercism.org/...";case"pdf":return"Nom du fichier PDF";default:return"https://example.com/..."}};return e("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e("div",{className:"w-full max-w-2xl",children:e("div",{className:"bg-white rounded-lg shadow-md p-6 overflow-y-auto max-h-[80vh]",children:e("div",{className:"container mx-auto p-4 max-w-2xl",children:a("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a("div",{className:"flex items-center mb-6",children:[e("button",{onClick:()=>d(`/moduleDetails/${o}`),className:"mr-4 p-2 rounded-full hover:bg-gray-100",children:e(x,{className:"text-blue-600"})}),e("h2",{className:"text-2xl font-bold text-gray-800",children:"Add Supplementary Lesson"})]}),a("form",{onSubmit:async n=>{var i,s,c,f;if(n.preventDefault(),t.type!=="pdf"&&!t.resourceUrl){alert("Resource URL is required for this type");return}if(t.type==="pdf"&&!t.file){alert("Please upload a PDF file");return}m(!0);try{const l=new FormData;l.append("title",t.title),l.append("content",t.content),l.append("type",t.type),l.append("duration",t.duration),t.platform&&l.append("platform",t.platform),t.difficulty&&l.append("difficulty",t.difficulty),t.type==="pdf"?l.append("file",t.file):l.append("resourceUrl",t.resourceUrl),(await D.post(`http://localhost:3000/api/study/supplementary/${o}`,l,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"multipart/form-data"}})).status===201&&d(`/moduleDetails/${o}`)}catch(l){console.error("Full error details:",{request:l.config,response:(i=l.response)==null?void 0:i.data,status:(s=l.response)==null?void 0:s.status}),alert(`Error: ${((f=(c=l.response)==null?void 0:c.data)==null?void 0:f.message)||l.message}`)}finally{m(!1)}},className:"space-y-4",children:[a("div",{children:[e("label",{className:"block text-gray-700 mb-1",children:"Title"}),e("input",{type:"text",name:"title",value:t.title,onChange:r,className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500",required:!0})]}),a("div",{children:[e("label",{className:"block text-gray-700 mb-1",children:"Content Description"}),e("textarea",{name:"content",value:t.content,onChange:r,className:"w-full p-2 border rounded h-24 focus:ring-2 focus:ring-blue-500",required:!0})]}),a("div",{children:[e("label",{className:"block text-gray-700 mb-1",children:"Type"}),a("select",{name:"type",value:t.type,onChange:r,className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500",children:[e("option",{value:"video",children:"Video"}),e("option",{value:"article",children:"Article"}),e("option",{value:"exercise",children:"Exercise"}),e("option",{value:"pdf",children:"PDF Document"}),e("option",{value:"other",children:"Other"})]})]}),t.type==="video"&&a("div",{children:[e("label",{className:"block text-gray-700 mb-1",children:"Video Platform"}),a("select",{name:"platform",className:"w-full p-2 border rounded",value:t.platform,onChange:r,children:[e("option",{value:"",children:"Select platform"}),e("option",{value:"youtube",children:"YouTube"}),e("option",{value:"vimeo",children:"Vimeo"}),e("option",{value:"other",children:"Other"})]})]}),t.type==="exercise"&&a("div",{children:[e("label",{className:"block text-gray-700 mb-1",children:"Difficulty Level"}),a("select",{name:"difficulty",className:"w-full p-2 border rounded",value:t.difficulty,onChange:r,children:[e("option",{value:"",children:"Select difficulty"}),e("option",{value:"beginner",children:"Beginner"}),e("option",{value:"intermediate",children:"Intermediate"}),e("option",{value:"advanced",children:"Advanced"})]})]}),t.type==="pdf"?a("div",{children:[e("label",{className:"block text-gray-700 mb-1",children:"PDF File"}),a("div",{className:"flex items-center",children:[e(N,{className:"mr-2 text-red-500"}),e("input",{type:"file",name:"file",accept:".pdf",onChange:b,className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500",required:!0})]}),e("p",{className:"text-xs text-gray-500 mt-1",children:"Upload a PDF document (max 10MB)"})]}):a("div",{children:[e("label",{className:"block text-gray-700 mb-1",children:"Resource URL"}),a("div",{className:"flex items-center",children:[e(w,{className:"mr-2 text-gray-500"}),e("input",{type:"url",name:"resourceUrl",value:t.resourceUrl,onChange:r,className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500",placeholder:y(t.type),required:t.type!=="pdf"})]}),a("p",{className:"text-xs text-gray-500 mt-1",children:[t.type==="video"&&"Link to YouTube or other video platform",t.type==="article"&&"Link to article or document",t.type==="exercise"&&"Link to exercise platform",t.type==="other"&&"Link to resource"]})]}),a("div",{children:[e("label",{className:"block text-gray-700 mb-1",children:"Duration (minutes)"}),e("input",{type:"number",name:"duration",value:t.duration,onChange:r,min:"0",className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500"})]}),a("div",{className:"flex justify-end space-x-3 pt-4",children:[e("button",{type:"button",onClick:()=>d(`/moduleDetails/${o}`),className:"px-4 py-2 border rounded-lg text-gray-700 hover:bg-gray-100",children:"Cancel"}),e("button",{type:"submit",disabled:p,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-blue-400 flex items-center",children:p?"Saving...":a(F,{children:[e(k,{className:"mr-2"}),"Add Lesson"]})})]})]})]})})})})})};export{S as default};
