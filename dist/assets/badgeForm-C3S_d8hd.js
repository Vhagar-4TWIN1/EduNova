import{F as M,c as I,b as h,a as p}from"./index.esm-BhP-dGL_.js";import{H as C}from"./header-B5dyLMZC.js";import{u as L,r as d,j as l,a4 as o,b as r,ad as s,a as B}from"./index-C3nL3Q8Y.js";import{u as k}from"./useMediaQuery-C8Pft0E8.js";import{B as F}from"./Button-Dg9Z3r8Z.js";import"./getThemeProps-DLbyqOGa.js";const E=()=>{const m=L(),g=k("(min-width:600px)"),[u,b]=d.useState(null),[c,f]=d.useState(null),x=t=>{const e=t.target.files[0];e&&(b(e),f(URL.createObjectURL(e)))};return l(o,{className:"badge-form-container",children:[r(C,{title:"CREATE BADGE",subtitle:"Create a New Badge"}),r(M,{onSubmit:async t=>{var i;const e=new FormData;e.append("title",t.title),e.append("category",t.category),e.append("description",t.description),e.append("points",t.points),u&&e.append("image",u);try{const a=await B.post("http://localhost:3000/api/badges",e,{headers:{"Content-Type":"multipart/form-data"}});console.log("Badge Created:",a.data),alert("Badge Created Successfully!"),m("/dashboard")}catch(a){console.error("Error creating badge:",((i=a.response)==null?void 0:i.data)||a),alert("Failed to create badge.")}},initialValues:v,validationSchema:R,children:({values:t,errors:e,touched:i,handleBlur:a,handleChange:n,handleSubmit:y})=>l("form",{onSubmit:y,children:[l(o,{display:"grid",gap:"20px",gridTemplateColumns:"repeat(2, minmax(0, 1fr))",sx:{"& > div":{gridColumn:g?"span 2":"span 4"}},children:[r(s,{fullWidth:!0,variant:"filled",label:"Title",name:"title",onBlur:a,onChange:n,value:t.title,error:!!i.title&&!!e.title,helperText:i.title&&e.title,sx:{gridColumn:"span 2","& .MuiInputBase-input":{color:"black"},"& .MuiInputLabel-root":{color:"gray",transition:"color 0.3s"},"& .MuiInputLabel-root.Mui-focused, & .MuiInputLabel-root.MuiInputLabel-shrink":{color:"transparent"},"& .MuiFilledInput-root":{backgroundColor:"#333",borderRadius:"5px"}}}),r(s,{fullWidth:!0,variant:"filled",label:"Category",name:"category",onBlur:a,onChange:n,value:t.category,error:!!i.category&&!!e.category,helperText:i.category&&e.category,sx:{gridColumn:"span 2","& .MuiInputBase-input":{color:"black"},"& .MuiInputLabel-root":{color:"gray",transition:"color 0.3s"},"& .MuiInputLabel-root.Mui-focused, & .MuiInputLabel-root.MuiInputLabel-shrink":{color:"transparent"},"& .MuiFilledInput-root":{backgroundColor:"#333",borderRadius:"5px"}}}),r(s,{fullWidth:!0,variant:"filled",label:"Description",name:"description",multiline:!0,rows:3,onBlur:a,onChange:n,value:t.description,error:!!i.description&&!!e.description,helperText:i.description&&e.description,sx:{gridColumn:"span 2","& .MuiInputBase-input":{color:"black"},"& .MuiInputLabel-root":{color:"gray",transition:"color 0.3s"},"& .MuiInputLabel-root.Mui-focused, & .MuiInputLabel-root.MuiInputLabel-shrink":{color:"transparent"},"& .MuiFilledInput-root":{backgroundColor:"#333",borderRadius:"5px"}}}),r(s,{fullWidth:!0,variant:"filled",label:"Points",name:"points",type:"number",onBlur:a,onChange:n,value:t.points,error:!!i.points&&!!e.points,helperText:i.points&&e.points,sx:{gridColumn:"span 2","& .MuiInputBase-input":{color:"black"},"& .MuiInputLabel-root":{color:"gray",transition:"color 0.3s"},"& .MuiInputLabel-root.Mui-focused, & .MuiInputLabel-root.MuiInputLabel-shrink":{color:"transparent"},"& .MuiFilledInput-root":{backgroundColor:"#333",borderRadius:"5px"}}}),l(o,{className:"file-input-container",display:"flex",flexDirection:"column",alignItems:"center",mt:2,children:[r("input",{type:"file",accept:"image/*",onChange:x}),c&&r(o,{mt:2,display:"flex",justifyContent:"center",children:r("img",{src:c,alt:"Preview",style:{maxWidth:"200px",maxHeight:"200px",borderRadius:"10px"}})})]})]}),r(o,{display:"flex",justifyContent:"center",mt:"20px",children:r(F,{type:"submit",className:"create-badge-btn",children:"Create Badge"})})]})})]})},R=I().shape({title:p().required("Required"),category:p().required("Required"),description:p().required("Required"),points:h().required("Required").positive().integer()}),v={title:"",category:"",description:"",points:""};export{E as default};
